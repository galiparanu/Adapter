[tox]
envlist = py39, py310, py311, py312, lint, typecheck
isolated_build = true

[testenv]
deps =
    pytest>=7.4.0
    pytest-cov>=4.1.0
    pytest-mock>=3.11.0
    pytest-asyncio>=0.21.0
commands =
    pytest {posargs}

[testenv:lint]
deps =
    ruff>=0.1.0
commands =
    ruff check vertex_spec_adapter tests
    ruff format --check vertex_spec_adapter tests

[testenv:typecheck]
deps =
    mypy>=1.5.0
    pydantic>=2.0.0
    types-PyYAML
commands =
    mypy vertex_spec_adapter

[testenv:security]
deps =
    bandit>=1.7.0
commands =
    bandit -r vertex_spec_adapter -f json -o bandit-report.json

